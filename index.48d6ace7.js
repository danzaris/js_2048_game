!function(){var t,e={};function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=new((t=function(){var t;function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.board=t,this.score=0,this.status="idle"}return t=[{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){this.status="playing",this.addRandomTile(),this.addRandomTile()}},{key:"addRandomTile",value:function(){for(var t=[],e=0;e<this.board.length;e++)for(var r=0;r<this.board[e].length;r++)0===this.board[e][r]&&t.push({row:e,col:r});if(t.length>0){var n=Math.floor(Math.random()*t.length),o=t[n],i=o.row,a=o.col;this.board[i][a]=.1>Math.random()?4:2}}},{key:"checkWinCondition",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.board[Symbol.iterator]();!(t=(n=o.next()).done);t=!0)if(n.value.includes(2048)){this.status="win";return}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}}},{key:"checkLoseCondition",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.board[Symbol.iterator]();!(t=(n=o.next()).done);t=!0)if(n.value.includes(0))return}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}for(var i=0;i<this.board.length;i++)for(var a=0;a<this.board[i].length-1;a++)if(this.board[i][a]===this.board[i][a+1])return;for(var s=0;s<this.board[0].length;s++)for(var c=0;c<this.board.length-1;c++)if(this.board[c][s]===this.board[c+1][s])return;this.status="lose"}},{key:"moveLeft",value:function(){var t=this;if("playing"===this.status){for(var e=!1,r=0;r<4;r++)!function(r){for(var o=n(t.board[r]),i=o.filter(function(t){return 0!==t}),a=0;a<i.length-1;a++)i[a]===i[a+1]&&(i[a]*=2,t.score+=i[a],i[a+1]=0);for(i=i.filter(function(t){return 0!==t});i.length<4;)i.push(0);o.toString()!==i.toString()&&(e=!0),t.board[r]=i}(r);e&&this.addRandomTile(),this.checkWinCondition(),this.checkLoseCondition()}}},{key:"moveRight",value:function(){var t=this;if("playing"===this.status){for(var e=!1,r=0;r<4;r++)!function(r){for(var o=n(t.board[r]),i=o.filter(function(t){return 0!==t}),a=i.length-1;a>0;a--)i[a]===i[a-1]&&(i[a]*=2,t.score+=i[a],i[a-1]=0);for(i=i.filter(function(t){return 0!==t});i.length<4;)i.unshift(0);o.toString()!==i.toString()&&(e=!0),t.board[r]=i}(r);e&&this.addRandomTile(),this.checkWinCondition(),this.checkLoseCondition()}}},{key:"moveUp",value:function(){var t=this;if("playing"===this.status){for(var e=!1,r=0;r<4;r++)!function(r){for(var o=[t.board[0][r],t.board[1][r],t.board[2][r],t.board[3][r]],i=n(o),a=o.filter(function(t){return 0!==t}),s=0;s<a.length-1;s++)a[s]===a[s+1]&&(a[s]*=2,t.score+=a[s],a[s+1]=0);for(a=a.filter(function(t){return 0!==t});a.length<4;)a.push(0);i.toString()!==a.toString()&&(e=!0);for(var c=0;c<4;c++)t.board[c][r]=a[c]}(r);e&&this.addRandomTile(),this.checkWinCondition(),this.checkLoseCondition()}}},{key:"moveDown",value:function(){var t=this;if("playing"===this.status){for(var e=!1,r=0;r<4;r++)!function(r){for(var n=[t.board[0][r],t.board[1][r],t.board[2][r],t.board[3][r]].filter(function(t){return 0!==t}),o=n.length-1;o>0;o--)n[o]===n[o-1]&&(n[o]*=2,t.score+=n[o],n[o-1]=0);for(n=n.filter(function(t){return 0!==t});n.length<4;)n.unshift(0);[t.board[0][r],t.board[1][r],t.board[2][r],t.board[3][r]].toString()!==n.toString()&&(e=!0);for(var i=0;i<4;i++)t.board[i][r]=n[i]}(r);e&&this.addRandomTile(),this.checkWinCondition(),this.checkLoseCondition()}}},{key:"restart",value:function(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle"}},{key:"reset",value:function(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle"}},{key:"hasValidMoves",value:function(){if(this.board.some(function(t){return t.includes(0)}))return!0;for(var t=0;t<4;t++)for(var e=0;e<4;e++){var r=this.board[t][e];if(e<3&&r===this.board[t][e+1]||t<3&&r===this.board[t+1][e])return!0}return!1}},{key:"checkWin",value:function(){for(var t=0;t<4;t++)if(this.board[t].includes(2048))return this.status="won",!0;return!1}}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,t),e}())&&t.__esModule?t.default:t),i=document.querySelector(".game-score"),a=document.querySelector(".button.start"),s=document.getElementById("game-board");function c(t){s.innerHTML="",t.forEach(function(t){var e=document.createElement("tr");e.classList.add("row"),t.forEach(function(t){var r=document.createElement("td");r.classList.add("cell"),r.textContent=0!==t?t:"",e.appendChild(r)}),s.appendChild(e)}),function(t){var e=document.querySelectorAll(".cell");t.forEach(function(t,r){t.forEach(function(t,n){var o=e[4*r+n];o.className="cell",t>0?(o.classList.add("cell--".concat(t)),o.textContent=t):o.textContent=""})})}(t)}function d(t){var e=document.querySelector(".message-lose"),r=document.querySelector(".message-win"),n=document.querySelector(".message-start");e.classList.add("hidden"),r.classList.add("hidden"),n.classList.add("hidden"),"win"===t?r.classList.remove("hidden"):"lose"===t?e.classList.remove("hidden"):"start"===t&&n.classList.remove("hidden")}function u(t){if("playing"===o.getStatus()){switch(t.key){case"ArrowLeft":o.moveLeft();break;case"ArrowRight":o.moveRight();break;case"ArrowUp":o.moveUp();break;case"ArrowDown":o.moveDown()}c(o.getState()),i.textContent=o.getScore(),o.checkWin()?(d("win"),document.removeEventListener("keydown",u)):o.hasValidMoves()||(d("lose"),document.removeEventListener("keydown",u))}}function l(){o.start(),c(o.getState()),i.textContent=o.getScore(),d("start"),document.querySelector(".game-score").textContent="".concat(0),document.querySelector(".message-start").classList.add("hidden"),a.textContent="Restart",a.removeEventListener("click",l),a.addEventListener("click",f);var t=document.querySelector(".button.start");t&&(t.classList.remove("start"),t.classList.add("restart")),document.addEventListener("keydown",u)}function f(){o.reset(),c(o.getState()),i.textContent=o.getScore(),d("start"),a.textContent="Start",a.removeEventListener("click",f),a.addEventListener("click",l);var t=document.querySelector(".button.restart");t&&(t.classList.remove("restart"),t.classList.add("start")),document.addEventListener("keydown",u)}document.addEventListener("DOMContentLoaded",function(){a&&a.addEventListener("click",l),c(o.getState())})}();
//# sourceMappingURL=index.48d6ace7.js.map
